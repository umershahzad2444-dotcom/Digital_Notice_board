<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Student Portal | Digital Notice Board</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <style>
        .notice-badge {
            background: rgba(0, 242, 255, 0.1);
            color: var(--accent-primary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid var(--accent-primary);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .date-badge {
            color: var(--text-secondary);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .attachment-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 16px;
            border-radius: 8px;
            color: var(--accent-primary);
            transition: 0.3s;
            margin-top: 15px;
        }

        .attachment-btn:hover {
            background: var(--accent-primary);
            color: black;
        }

        .hero {
            padding: 80px 0 50px;
            background: linear-gradient(to bottom, rgba(0, 242, 255, 0.05), transparent);
            text-align: center;
        }

        .active-cat {
            border-color: var(--accent-primary) !important;
            background: rgba(0, 242, 255, 0.1) !important;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2) !important;
        }
    </style>
</head>

<body>

    <nav class="navbar-vibe">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="brand-logo">DNB <span>STUDENT</span></div>

            {% if is_admin %}
            <a href="/manage-notices" class="btn-primary-vibe"
                style="padding: 8px 20px; font-size: 0.9rem; background: var(--accent-secondary);">‚Üê Back to
                Dashboard</a>
            {% else %}
            <a href="/logout" class="btn-outline-vibe" style="padding: 8px 20px; font-size: 0.9rem;">Logout</a>
            {% endif %}
        </div>
    </nav>

    <div class="hero">
        <div class="container">
            <h1 class="mb-3" style="font-size: 3rem;">Student <span style="color: var(--accent-primary);">Panel</span>
            </h1>
            <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto;">
                Select a category below to explore specific updates and announcements.
            </p>
        </div>
    </div>

    <!-- Category Selector Panel -->
    <div class="container mb-5">
        <div class="row g-3 justify-content-center">
            <div class="col-6 col-md-2">
                <a href="/notices?category=All{% if is_admin %}&view_as=admin{% endif %}"
                    class="glass-card text-center d-block p-3 {% if current_category == 'All' %}active-cat{% endif %}"
                    style="text-decoration: none;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">üè†</div>
                    <div style="font-weight: bold; color: white;">All</div>
                </a>
            </div>
            <div class="col-6 col-md-2">
                <a href="/notices?category=Study{% if is_admin %}&view_as=admin{% endif %}"
                    class="glass-card text-center d-block p-3 {% if current_category == 'Study' %}active-cat{% endif %}"
                    style="text-decoration: none;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">üìö</div>
                    <div style="font-weight: bold; color: white;">Study</div>
                </a>
            </div>
            <div class="col-6 col-md-2">
                <a href="/notices?category=Sports{% if is_admin %}&view_as=admin{% endif %}"
                    class="glass-card text-center d-block p-3 {% if current_category == 'Sports' %}active-cat{% endif %}"
                    style="text-decoration: none;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚öΩ</div>
                    <div style="font-weight: bold; color: white;">Sports</div>
                </a>
            </div>
            <div class="col-6 col-md-2">
                <a href="/notices?category=Events{% if is_admin %}&view_as=admin{% endif %}"
                    class="glass-card text-center d-block p-3 {% if current_category == 'Events' %}active-cat{% endif %}"
                    style="text-decoration: none;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">üéä</div>
                    <div style="font-weight: bold; color: white;">Events</div>
                </a>
            </div>
            <div class="col-6 col-md-2">
                <a href="/notices?category=General{% if is_admin %}&view_as=admin{% endif %}"
                    class="glass-card text-center d-block p-3 {% if current_category == 'General' %}active-cat{% endif %}"
                    style="text-decoration: none;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚ÑπÔ∏è</div>
                    <div style="font-weight: bold; color: white;">General</div>
                </a>
            </div>
        </div>
    </div>

    <div class="container pb-5">
        <h4 class="mb-4 text-secondary">Showing: <span style="color: var(--accent-primary);">{{ current_category
                }}</span> Notices</h4>
        <div class="row g-4">
            {% for n in notices %}
            <div class="col-md-10 mx-auto">
                <div class="glass-card" style="animation: fadeIn 0.5s ease-out;">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h3 class="mb-0">{{ n.title }}</h3>
                        <span class="notice-badge">{{ n.category }}</span>
                    </div>

                    <p style="color: #ccc; line-height: 1.7; font-size: 1.05rem;">
                        {{ n.content }}
                    </p>

                    {% if n.attachment %}
                    <a href="/view-attachment?file={{ n.attachment }}" class="attachment-btn">
                        <span>üìé</span> View Attachment
                    </a>
                    {% endif %}

                    <div class="mt-4 pt-3"
                        style="border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between;">
                        <span class="date-badge">üïí Posted on: {{ n.date }}</span>
                        <span class="date-badge">#{{ n.id }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}

            {% if not notices %}
            <div class="col-12 text-center mt-5">
                <div class="glass-card d-inline-block">
                    <h3 class="text-secondary">No notices available right now.</h3>
                    <p>Check back later for updates!</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

</body>

</html>